# Team 15: Iteration Three Report

### Selected Project: [commons-lang](/completeproject)

This iteration we focused primarily on the utilization of EvoSuite and Randoop. Our test coverage for the last iteration
was already fairly high, so we only added a few additional tests in order to improve mutation coverage.

Important Notes: Prior to iteration 3, our team was using IntelliJ with Java 11 in order to create and run our tests. In
order to use EvoSuite, we had to transition to Java 8 which presented a number of issues. Although we sorted out many of
the problems that moving to Java 8 presented, we ended up with very inconsistent coverage reports from both IntelliJ and
PITest. We generated our random tests using the default configurations for Randoop and Evosuite. While the tests would
compile, we saw fairly poor results with the tests overall. In some cases, the combination of EvoSuite, Randoop, and manual
tests resulted in worse overall test coverage for some categories. Perhaps some different configuration could have 
resulted in better coverage. We've documented some of the problems we faced below, along with some additional details. 
In the end, we did manage to get most of the tests generated by Randoop and EvoSuite working alongside our original tests, 
all while using Java 8.

Errors When Running: When moving to Java 8 we found that different tests began failing on the lab machines and completely seperate tests
began failing on our windows machines. Since these tests were primarily tests that we did not write, we suppressed the tests
that failed for windows and left the tests that fail on the lab machines alone. This was primarily to avoid a significant reduction in
our test coverage. When running this code on the lab machines prior to the end of this iteration, 15 tests fail but none of them throw errors.
All of these tests worked prior to moving to Java 8. Aditionally, some of the Randoop tests seem to fail at random. We've also left those
alone since they arent generating errors and it's seemingly impossible to narrow down which tests will fail.

## Team Test Coverage:
|                                              | Line Cov        | Branch Cov    | Method Cov    | Mutation Score |
|----------------------------------------------|-----------------|---------------|---------------|----------------|
| Original tests only                          | 84% (1263/1494) | 68% (294/430) | 84% (365/432) | 76% (885/1153) |
| Original tests + iter 2 tests                | 91% (1363/1494) | 72% (312/430) | 96% (421/435) | 81% (932/1145) |
| Original tests + iter 2 tests + iter 3 tests | 92% (1377/1492) | 75% (327/433) | 97% (423/435) | 82% (948/1145) |
| Randoop tests only                           | 28% (413/1464)  | 40% (54/135)  | 47% (203/427) | 15% (177/1153) | 
| EvoSuite tests only                          | 57% (890/1535)  | 49% (401/807) | 80% (251/311) | 46% (459/994)  |
| ALL the tests                                | 92% (1420/1528) | 83% (359/429) | 97% (428/438) | 83% (881/1053) |



## Package Coverage:

### [org.apache.commons.lang3.reflect](/completeproject/src/main/java/org/apache/commons/lang3/reflect/) - Chad Minning

Strategies: For this iteration I used a mix of input space partitioning and graph-based coverage to identify uncovered 
sections of code. Since most of the testing that I did was on methods that already had a decent coverage, I stuck
primarily to graph-based coverage to try and reach untouched branches. I also used the report generated by PITest to
identify lines of code with mutations that weren't being killed in order to motivate some new tests.
The strategies used for each test case can be found documented in the code.

Additional Notes: I used IntelliJ's test coverage tool in order to generate test coverage reports. For some reason these
reports were inconsistent depending on what tests I was running. The number of lines and branches reported by the tool
was drastically different for the Randoop and EvoSuite tests. Additionally, the vast majority of the tests generated by
Randoop failed to compile. As a result, I was only able to include coverage for the few tests that Randoop did create
which is why the coverage values for those tests are very low. All of the Randoop and EvoSuite tests can be found
in the reflect test directory.

|                                              | Line Cov        | Branch Cov    | Method Cov    | Mutation Score |
|----------------------------------------------|-----------------|---------------|---------------|----------------|
| Original tests only                          | 84% (922/1094)  | 64% (232/360) | 92% (176/191) | 78% (621/790)  |
| Original tests + iter 2 tests                | 90% (994/1094)  | 68% (248/360) | 97% (186/191) | 82% (645/790)  |
| Original tests + iter 2 tests + iter 3 tests | 92% (1008/1092) | 72% (263/363) | 98% (188/191) | 84% (661/790)  |
| Randoop tests only                           | 21% (238/1094)  | 24% (26/105)  | 42% (81/191)  | 16% (128/790)  |
| EvoSuite tests only                          | 61% (669/1093)  | 48% (370/766) | 87% (168/191) | 58% (459/788)  |
| ALL the tests                                | 93% (1027/1093) | 79% (292/366) | 99% (190/191) | 88% (695/790)  | 

### [org.apache.commons.lang3.compare](/completeproject/src/main/java/org/apache/commons/lang3/compare/) - Will Daknis
### [org.apache.commons.lang3.event](/completeproject/src/main/java/org/apache/commons/lang3/event/) - Will Daknis
### [org.apache.commons.lang3.stream](/completeproject/src/main/java/org/apache/commons/lang3/stream/) - Will Daknis

Additional Notes: My test coverage shows the closest accuracy I could get for my tests. I ran into some trouble 
reporting the EvoSuite and Randoop tests. My RandoopTest(0) file had seemingly random tests fail for any given
configuration, so I had to take that file out of my Randoop test directory in order to get some reports on my
mutation coverage. Additionally, my mutation score for EvoSuite testing is noteworthy. I reran and dobule checked
with my team that I was doing the EvoSuite testing correctly, but my results don't show a good mutation score
coverage. Lastly, I attempted to increase original test coverage, but was unable to due to the generics, complexity,
and time limitations after Randoop and EvoSuite were up. This shouldn't, however, change our team's overall line
and mutation score increase of 5%.

|                                              | Line Cov       | Branch Cov    | Method Cov    | Mutation Score |
|----------------------------------------------|----------------|---------------|---------------|----------------|
| Original tests only                          | 85% (132/154)  | 94% (32/34)   | 84% (63/75)   | 64% (83/129)   |
| Original tests + iter 2 tests                | 89% (136/154)  | 94% (32/34)   | 90% (70/78)   | 67% (81/121)   |
| Original tests + iter 2 tests + iter 3 tests | 89% (136/154)  | 94% (32/34)   | 90% (70/78)   | 67% (81/121)   |
| Randoop tests only                           | 91% (117/129)  | 93% (28/30)   | 92% (67/73)   | 36% (47/129)   |
| EvoSuite tests only                          | 55% (97/176)   | 70% (21/30)   | 45% (14/31)   | 0%  (0/129)    |
| ALL the tests                                | 86% (152/176)  | 84% (32/38)   | 92% (73/79)   | 69% (89/129)   |

### [org.apache.commons.lang3.function](/completeproject/src/main/java/org/apache/commons/lang3/function/) - Yuxin Huang

Additional Notes: In this iteration,
I was able to use evosuite and randoop tools to generate some test cases for my package.
Since my package has a lot of classes, it took me a while for generating test cases.
As a result, I got a total of about 10k test cases for my whole package.
It also took me a while for generating the coverage reports.
Also, a weird thing is that, for the randoop and evosuite test,
they did not have a great mutation coverage for my package.
Since I already got a 10% mutation coverage in the last iteration,
I did not write new test cases for my package.
When I was trying to run all the tests and get a mutation score for it,
it took me a long time could not generate the score.
With Chad's help, we got a 41% mutation score for my package.
We believe that's because the randoop and evosuit test cases decreased the mutations score.
And there isn't any error pop up while generating the pit test.
Thanks to my teammate's help and our collaboration, we got a nice overall coverage for our team project.

|                                              | Line Cov      | Branch Cov   | Method Cov    | Mutation Score |
|----------------------------------------------|---------------|--------------|---------------|----------------|
| Original tests only                          | 79% (195/246) | 90% (30/33)  | 74% (126/166) | 77% (181/234)  |
| Original tests + iter 2 tests                | 96% (238/246) | 91% (32/36)  | 99% (165/166) | 88% (206/234)  |
| Original tests + iter 2 tests + iter 3 tests | 96% (238/246) | 91% (32/36)  | 99% (165/166) | 88% (206/234)  |
| Randoop tests only                           | 24% (58/241)  | 100% (0/0)   | 33% (55/163)  | 1% (2/234)     |
| EvoSuite tests only                          | 47% (124/266) | 90% (10/11)  | 77% (69/89)   | 0% (0/77)      |
| ALL the tests                                | 93% (241/259) | 100% (35/35) | 98% (165/168) | 41% (97/234)   |

## Iteration Three Reflection

### What went well
This iteration we did a better job at coordinating our work through more consistent communication. We met more frequently,
both in person after class and over teams on Wednesdays. Despite losing a team member, we still managed to meet our
test coverage goals for both line and mutation test coverage.

### What could have gone better
Similar to the last two iterations, time management seemed to be our biggest struggle. This was largely due to the
many issues we faced trying to debug our work environments in order to get everything working. However, we still put
off the majority of our work until the last week which is something that we will look to improve upon next iteration.
We also lost one of our team members this iteration which was unexpected. Despite this, we still managed to pull things
together in the end.

